{"ast":null,"code":"var _jsxFileName = \"/Users/zxydediannao/new_fashion-calendar/fashion-calendar/src/components/EventDetailPage.jsx\",\n  _s = $RefreshSig$();\n// src/components/EventDetailPage.jsx\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport moment from 'moment';\nimport './EventDetailPage.css';\nimport { storageService } from '../utils/storage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EventDetailPage = () => {\n  _s();\n  const {\n    date\n  } = useParams();\n  const navigate = useNavigate();\n  const [content, setContent] = useState('');\n  const [backgroundImage, setBackgroundImage] = useState('');\n  const [events, setEvents] = useState([]);\n  const [showImageUpload, setShowImageUpload] = useState(false);\n  const editorRef = useRef(null);\n  const isComposingRef = useRef(false); // 用于中文输入法\n\n  // 加载该日期的事件数据\n  useEffect(() => {\n    const savedContent = storageService.getDailyContent(date);\n    const savedBackground = storageService.getDailyBackground(date);\n    const dateEvents = storageService.getEventsByDate(date);\n    setContent(savedContent || '');\n    setBackgroundImage(savedBackground || '');\n    setEvents(dateEvents);\n  }, [date]);\n\n  // 只在初始加载时设置内容，避免光标跳动\n  useEffect(() => {\n    if (editorRef.current && content !== undefined) {\n      // 保存当前选区\n      const selection = window.getSelection();\n      const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n      const currentFocus = document.activeElement;\n\n      // 设置内容\n      editorRef.current.innerHTML = content || '';\n\n      // 恢复选区\n      if (range && currentFocus === editorRef.current) {\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n\n      // 更新空状态\n      updateEmptyState();\n    }\n  }, []); // 只在组件挂载时执行一次\n\n  const updateEmptyState = () => {\n    if (editorRef.current) {\n      const html = editorRef.current.innerHTML;\n      const isEmpty = !html || html === '<br>' || html === '<div><br></div>';\n      if (isEmpty) {\n        editorRef.current.classList.add('empty');\n      } else {\n        editorRef.current.classList.remove('empty');\n      }\n    }\n  };\n  const handleImageUpload = e => {\n    const file = e.target.files[0];\n    if (file) {\n      if (!file.type.startsWith('image/')) {\n        alert('请选择图片文件');\n        return;\n      }\n      if (file.size > 5 * 1024 * 1024) {\n        alert('图片大小不能超过 5MB');\n        return;\n      }\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const imageUrl = reader.result;\n        if (editorRef.current) {\n          // 保存当前选区\n          const selection = window.getSelection();\n          const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n          const img = document.createElement('img');\n          img.src = imageUrl;\n          img.alt = \"uploaded\";\n          img.className = \"uploaded-image\";\n          if (range) {\n            range.insertNode(img);\n            // 在图片后插入一个空格，方便继续输入\n            const space = document.createTextNode(' ');\n            range.insertNode(space);\n            range.collapse(false);\n          } else {\n            editorRef.current.appendChild(img);\n            editorRef.current.appendChild(document.createTextNode(' '));\n          }\n\n          // 更新内容和状态\n          updateContentFromDOM();\n        }\n      };\n      reader.onerror = () => {\n        alert('图片读取失败，请重试');\n      };\n      reader.readAsDataURL(file);\n    }\n    e.target.value = '';\n  };\n  const handleBackgroundUpload = e => {\n    const file = e.target.files[0];\n    if (file) {\n      if (!file.type.startsWith('image/')) {\n        alert('请选择图片文件');\n        return;\n      }\n      if (file.size > 5 * 1024 * 1024) {\n        alert('图片大小不能超过 5MB');\n        return;\n      }\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const imageUrl = reader.result;\n        setBackgroundImage(imageUrl);\n        storageService.saveDailyBackground(date, imageUrl);\n      };\n      reader.onerror = () => {\n        alert('背景图片读取失败，请重试');\n      };\n      reader.readAsDataURL(file);\n    }\n    e.target.value = '';\n  };\n\n  // 从 DOM 更新内容状态\n  const updateContentFromDOM = () => {\n    if (editorRef.current) {\n      const newContent = editorRef.current.innerHTML;\n      setContent(newContent);\n      updateEmptyState();\n      storageService.saveDailyContent(date, newContent);\n    }\n  };\n\n  // 防抖的内容更新\n  const handleContentChange = () => {\n    if (isComposingRef.current) return; // 中文输入法期间不更新\n\n    requestAnimationFrame(() => {\n      updateContentFromDOM();\n    });\n  };\n  const handleCompositionStart = () => {\n    isComposingRef.current = true;\n  };\n  const handleCompositionEnd = () => {\n    isComposingRef.current = false;\n    updateContentFromDOM();\n  };\n  const handleKeyDown = e => {\n    // 防止回车键产生 <div> 包裹，使用 <br> 代替\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      document.execCommand('insertLineBreak');\n    }\n  };\n  const saveContent = () => {\n    storageService.saveDailyContent(date, content);\n    alert('内容已保存');\n  };\n  const handleEditorFocus = () => {\n    if (editorRef.current) {\n      editorRef.current.classList.remove('empty');\n\n      // 如果内容为空，确保光标在正确位置\n      if (editorRef.current.innerHTML === '') {\n        // 设置一个零宽空格确保光标可以定位\n        editorRef.current.innerHTML = '&#8203;';\n        const range = document.createRange();\n        const selection = window.getSelection();\n        range.setStart(editorRef.current, 0);\n        range.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    }\n  };\n  const handleEditorBlur = () => {\n    updateEmptyState();\n\n    // 清理零宽空格\n    if (editorRef.current && editorRef.current.innerHTML === '&#8203;') {\n      editorRef.current.innerHTML = '';\n    }\n  };\n  const addNewEvent = () => {\n    const title = prompt('请输入事件标题:');\n    if (!title || title.trim() === '') {\n      alert('事件标题不能为空');\n      return;\n    }\n    const type = prompt('请输入事件类型 (work/meeting/personal/urgent):', 'work');\n    const validTypes = ['work', 'meeting', 'personal', 'urgent'];\n    if (!validTypes.includes(type)) {\n      alert('事件类型必须是: work, meeting, personal 或 urgent');\n      return;\n    }\n    const startTime = prompt('请输入开始时间 (HH:mm)', '09:00');\n    const endTime = prompt('请输入结束时间 (HH:mm)', '10:00');\n    const timeRegex = /^([01]?[0-9]|2[0-3]):[0-5][0-9]$/;\n    if (!startTime || !endTime || !timeRegex.test(startTime) || !timeRegex.test(endTime)) {\n      alert('时间格式不正确，请使用 HH:mm 格式 (00:00 - 23:59)');\n      return;\n    }\n    const start = new Date(date + 'T' + startTime + ':00');\n    const end = new Date(date + 'T' + endTime + ':00');\n    if (end <= start) {\n      alert('结束时间必须晚于开始时间');\n      return;\n    }\n    const hasConflict = events.some(event => {\n      const eventStart = new Date(event.start);\n      const eventEnd = new Date(event.end);\n      return start < eventEnd && end > eventStart;\n    });\n    if (hasConflict) {\n      if (!confirm('该时间段与已有事件冲突，是否继续添加？')) {\n        return;\n      }\n    }\n    const newEvent = {\n      title: title.trim(),\n      start: start,\n      end: end,\n      type: type\n    };\n    const savedEvent = storageService.addEvent(newEvent);\n    setEvents(prev => [...prev, savedEvent]);\n    alert('事件添加成功！');\n  };\n  const deleteEvent = eventId => {\n    if (window.confirm('确定要删除这个事件吗？')) {\n      const updatedEvents = storageService.deleteEvent(eventId);\n      setEvents(updatedEvents.filter(event => moment(event.start).isSame(date, 'day')));\n      alert('事件已删除');\n    }\n  };\n  const formatEventType = type => {\n    const typeMap = {\n      'work': '💼 工作',\n      'meeting': '👥 会议',\n      'personal': '👤 个人',\n      'urgent': '🚨 紧急'\n    };\n    return typeMap[type] || type;\n  };\n  const getEventTypeColor = type => {\n    const colorMap = {\n      'work': '#3498db',\n      'meeting': '#9b59b6',\n      'personal': '#2ecc71',\n      'urgent': '#e74c3c'\n    };\n    return colorMap[type] || '#3498db';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"event-detail-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"detail-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-btn\",\n        onClick: () => navigate('/'),\n        children: \"\\u2190 \\u8FD4\\u56DE\\u65E5\\u5386\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"detail-title\",\n        children: moment(date).format('YYYY年MM月DD日 dddd')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"save-btn\",\n        onClick: saveContent,\n        children: \"\\uD83D\\uDCBE \\u4FDD\\u5B58\\u5185\\u5BB9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"detail-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"editor-toolbar\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"toolbar-btn\",\n          onClick: () => setShowImageUpload(!showImageUpload),\n          children: \"\\uD83D\\uDCF7 \\u6DFB\\u52A0\\u56FE\\u7247\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"toolbar-btn\",\n          children: [\"\\uD83D\\uDDBC\\uFE0F \\u80CC\\u666F\\u56FE\\u7247\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: handleBackgroundUpload,\n            style: {\n              display: 'none'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"toolbar-btn\",\n          onClick: addNewEvent,\n          children: \"\\u2795 \\u6DFB\\u52A0\\u4E8B\\u4EF6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this), showImageUpload && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-upload-panel\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u9009\\u62E9\\u56FE\\u7247\\uFF1A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: handleImageUpload\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"events-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"\\uD83D\\uDCC5 \\u4ECA\\u65E5\\u4E8B\\u4EF6 (\", events.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this), events.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"events-list\",\n          children: events.map(event => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"event-card\",\n            style: {\n              borderLeftColor: getEventTypeColor(event.type)\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: event.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [moment(event.start).format('HH:mm'), \" - \", moment(event.end).format('HH:mm')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"event-type\",\n                style: {\n                  backgroundColor: getEventTypeColor(event.type)\n                },\n                children: formatEventType(event.type)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"delete-event-btn\",\n                onClick: () => deleteEvent(event.id),\n                children: \"\\u5220\\u9664\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 19\n            }, this)]\n          }, event.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"no-events\",\n          children: \"\\u6682\\u65E0\\u4E8B\\u4EF6\\uFF0C\\u70B9\\u51FB\\\"\\u6DFB\\u52A0\\u4E8B\\u4EF6\\\"\\u6309\\u94AE\\u521B\\u5EFA\\u65B0\\u4E8B\\u4EF6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: editorRef,\n        className: \"content-editor\",\n        contentEditable: true,\n        suppressContentEditableWarning: true,\n        onInput: handleContentChange,\n        onFocus: handleEditorFocus,\n        onBlur: handleEditorBlur,\n        onKeyDown: handleKeyDown,\n        onCompositionStart: handleCompositionStart,\n        onCompositionEnd: handleCompositionEnd,\n        style: {\n          backgroundImage: backgroundImage ? `url(${backgroundImage})` : 'none',\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          backgroundColor: backgroundImage ? 'rgba(255, 255, 255, 0.9)' : 'transparent'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 298,\n    columnNumber: 5\n  }, this);\n};\n_s(EventDetailPage, \"bjX714D0HePMAMlWlMI9qVOHkbU=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = EventDetailPage;\nexport default EventDetailPage;\nvar _c;\n$RefreshReg$(_c, \"EventDetailPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","moment","storageService","jsxDEV","_jsxDEV","EventDetailPage","_s","date","navigate","content","setContent","backgroundImage","setBackgroundImage","events","setEvents","showImageUpload","setShowImageUpload","editorRef","isComposingRef","savedContent","getDailyContent","savedBackground","getDailyBackground","dateEvents","getEventsByDate","current","undefined","selection","window","getSelection","range","rangeCount","getRangeAt","currentFocus","document","activeElement","innerHTML","removeAllRanges","addRange","updateEmptyState","html","isEmpty","classList","add","remove","handleImageUpload","e","file","target","files","type","startsWith","alert","size","reader","FileReader","onloadend","imageUrl","result","img","createElement","src","alt","className","insertNode","space","createTextNode","collapse","appendChild","updateContentFromDOM","onerror","readAsDataURL","value","handleBackgroundUpload","saveDailyBackground","newContent","saveDailyContent","handleContentChange","requestAnimationFrame","handleCompositionStart","handleCompositionEnd","handleKeyDown","key","preventDefault","execCommand","saveContent","handleEditorFocus","createRange","setStart","handleEditorBlur","addNewEvent","title","prompt","trim","validTypes","includes","startTime","endTime","timeRegex","test","start","Date","end","hasConflict","some","event","eventStart","eventEnd","confirm","newEvent","savedEvent","addEvent","prev","deleteEvent","eventId","updatedEvents","filter","isSame","formatEventType","typeMap","getEventTypeColor","colorMap","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","format","accept","onChange","style","display","length","map","borderLeftColor","backgroundColor","id","ref","contentEditable","suppressContentEditableWarning","onInput","onFocus","onBlur","onKeyDown","onCompositionStart","onCompositionEnd","backgroundSize","backgroundPosition","_c","$RefreshReg$"],"sources":["/Users/zxydediannao/new_fashion-calendar/fashion-calendar/src/components/EventDetailPage.jsx"],"sourcesContent":["// src/components/EventDetailPage.jsx\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport moment from 'moment';\nimport './EventDetailPage.css';\nimport { storageService } from '../utils/storage';\n\nconst EventDetailPage = () => {\n  const { date } = useParams();\n  const navigate = useNavigate();\n  const [content, setContent] = useState('');\n  const [backgroundImage, setBackgroundImage] = useState('');\n  const [events, setEvents] = useState([]);\n  const [showImageUpload, setShowImageUpload] = useState(false);\n  const editorRef = useRef(null);\n  const isComposingRef = useRef(false); // 用于中文输入法\n\n  // 加载该日期的事件数据\n  useEffect(() => {\n    const savedContent = storageService.getDailyContent(date);\n    const savedBackground = storageService.getDailyBackground(date);\n    const dateEvents = storageService.getEventsByDate(date);\n\n    setContent(savedContent || '');\n    setBackgroundImage(savedBackground || '');\n    setEvents(dateEvents);\n  }, [date]);\n\n  // 只在初始加载时设置内容，避免光标跳动\n  useEffect(() => {\n    if (editorRef.current && content !== undefined) {\n      // 保存当前选区\n      const selection = window.getSelection();\n      const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n      const currentFocus = document.activeElement;\n      \n      // 设置内容\n      editorRef.current.innerHTML = content || '';\n      \n      // 恢复选区\n      if (range && currentFocus === editorRef.current) {\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n      \n      // 更新空状态\n      updateEmptyState();\n    }\n  }, []); // 只在组件挂载时执行一次\n\n  const updateEmptyState = () => {\n    if (editorRef.current) {\n      const html = editorRef.current.innerHTML;\n      const isEmpty = !html || html === '<br>' || html === '<div><br></div>';\n      if (isEmpty) {\n        editorRef.current.classList.add('empty');\n      } else {\n        editorRef.current.classList.remove('empty');\n      }\n    }\n  };\n\n  const handleImageUpload = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      if (!file.type.startsWith('image/')) {\n        alert('请选择图片文件');\n        return;\n      }\n\n      if (file.size > 5 * 1024 * 1024) {\n        alert('图片大小不能超过 5MB');\n        return;\n      }\n\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const imageUrl = reader.result;\n        \n        if (editorRef.current) {\n          // 保存当前选区\n          const selection = window.getSelection();\n          const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n          \n          const img = document.createElement('img');\n          img.src = imageUrl;\n          img.alt = \"uploaded\";\n          img.className = \"uploaded-image\";\n          \n          if (range) {\n            range.insertNode(img);\n            // 在图片后插入一个空格，方便继续输入\n            const space = document.createTextNode(' ');\n            range.insertNode(space);\n            range.collapse(false);\n          } else {\n            editorRef.current.appendChild(img);\n            editorRef.current.appendChild(document.createTextNode(' '));\n          }\n          \n          // 更新内容和状态\n          updateContentFromDOM();\n        }\n      };\n      \n      reader.onerror = () => {\n        alert('图片读取失败，请重试');\n      };\n      \n      reader.readAsDataURL(file);\n    }\n    e.target.value = '';\n  };\n\n  const handleBackgroundUpload = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      if (!file.type.startsWith('image/')) {\n        alert('请选择图片文件');\n        return;\n      }\n\n      if (file.size > 5 * 1024 * 1024) {\n        alert('图片大小不能超过 5MB');\n        return;\n      }\n\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const imageUrl = reader.result;\n        setBackgroundImage(imageUrl);\n        storageService.saveDailyBackground(date, imageUrl);\n      };\n      \n      reader.onerror = () => {\n        alert('背景图片读取失败，请重试');\n      };\n      \n      reader.readAsDataURL(file);\n    }\n    e.target.value = '';\n  };\n\n  // 从 DOM 更新内容状态\n  const updateContentFromDOM = () => {\n    if (editorRef.current) {\n      const newContent = editorRef.current.innerHTML;\n      setContent(newContent);\n      updateEmptyState();\n      storageService.saveDailyContent(date, newContent);\n    }\n  };\n\n  // 防抖的内容更新\n  const handleContentChange = () => {\n    if (isComposingRef.current) return; // 中文输入法期间不更新\n    \n    requestAnimationFrame(() => {\n      updateContentFromDOM();\n    });\n  };\n\n  const handleCompositionStart = () => {\n    isComposingRef.current = true;\n  };\n\n  const handleCompositionEnd = () => {\n    isComposingRef.current = false;\n    updateContentFromDOM();\n  };\n\n  const handleKeyDown = (e) => {\n    // 防止回车键产生 <div> 包裹，使用 <br> 代替\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      document.execCommand('insertLineBreak');\n    }\n  };\n\n  const saveContent = () => {\n    storageService.saveDailyContent(date, content);\n    alert('内容已保存');\n  };\n\n  const handleEditorFocus = () => {\n    if (editorRef.current) {\n      editorRef.current.classList.remove('empty');\n      \n      // 如果内容为空，确保光标在正确位置\n      if (editorRef.current.innerHTML === '') {\n        // 设置一个零宽空格确保光标可以定位\n        editorRef.current.innerHTML = '&#8203;';\n        const range = document.createRange();\n        const selection = window.getSelection();\n        range.setStart(editorRef.current, 0);\n        range.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    }\n  };\n\n  const handleEditorBlur = () => {\n    updateEmptyState();\n    \n    // 清理零宽空格\n    if (editorRef.current && editorRef.current.innerHTML === '&#8203;') {\n      editorRef.current.innerHTML = '';\n    }\n  };\n\n  const addNewEvent = () => {\n    const title = prompt('请输入事件标题:');\n    if (!title || title.trim() === '') {\n      alert('事件标题不能为空');\n      return;\n    }\n\n    const type = prompt('请输入事件类型 (work/meeting/personal/urgent):', 'work');\n    const validTypes = ['work', 'meeting', 'personal', 'urgent'];\n    if (!validTypes.includes(type)) {\n      alert('事件类型必须是: work, meeting, personal 或 urgent');\n      return;\n    }\n\n    const startTime = prompt('请输入开始时间 (HH:mm)', '09:00');\n    const endTime = prompt('请输入结束时间 (HH:mm)', '10:00');\n\n    const timeRegex = /^([01]?[0-9]|2[0-3]):[0-5][0-9]$/;\n    if (!startTime || !endTime || !timeRegex.test(startTime) || !timeRegex.test(endTime)) {\n      alert('时间格式不正确，请使用 HH:mm 格式 (00:00 - 23:59)');\n      return;\n    }\n\n    const start = new Date(date + 'T' + startTime + ':00');\n    const end = new Date(date + 'T' + endTime + ':00');\n    \n    if (end <= start) {\n      alert('结束时间必须晚于开始时间');\n      return;\n    }\n\n    const hasConflict = events.some(event => {\n      const eventStart = new Date(event.start);\n      const eventEnd = new Date(event.end);\n      return (start < eventEnd && end > eventStart);\n    });\n\n    if (hasConflict) {\n      if (!confirm('该时间段与已有事件冲突，是否继续添加？')) {\n        return;\n      }\n    }\n\n    const newEvent = {\n      title: title.trim(),\n      start: start,\n      end: end,\n      type: type\n    };\n\n    const savedEvent = storageService.addEvent(newEvent);\n    setEvents(prev => [...prev, savedEvent]);\n    alert('事件添加成功！');\n  };\n\n  const deleteEvent = (eventId) => {\n    if (window.confirm('确定要删除这个事件吗？')) {\n      const updatedEvents = storageService.deleteEvent(eventId);\n      setEvents(updatedEvents.filter(event => \n        moment(event.start).isSame(date, 'day')\n      ));\n      alert('事件已删除');\n    }\n  };\n\n  const formatEventType = (type) => {\n    const typeMap = {\n      'work': '💼 工作',\n      'meeting': '👥 会议',\n      'personal': '👤 个人',\n      'urgent': '🚨 紧急'\n    };\n    return typeMap[type] || type;\n  };\n\n  const getEventTypeColor = (type) => {\n    const colorMap = {\n      'work': '#3498db',\n      'meeting': '#9b59b6',\n      'personal': '#2ecc71',\n      'urgent': '#e74c3c'\n    };\n    return colorMap[type] || '#3498db';\n  };\n\n  return (\n    <div className=\"event-detail-page\">\n      <div className=\"detail-header\">\n        <button className=\"back-btn\" onClick={() => navigate('/')}>\n          ← 返回日历\n        </button>\n        <h1 className=\"detail-title\">{moment(date).format('YYYY年MM月DD日 dddd')}</h1>\n        <button className=\"save-btn\" onClick={saveContent}>\n          💾 保存内容\n        </button>\n      </div>\n      \n      <div className=\"detail-content\">\n        <div className=\"editor-toolbar\">\n          <button \n            className=\"toolbar-btn\" \n            onClick={() => setShowImageUpload(!showImageUpload)}\n          >\n            📷 添加图片\n          </button>\n          \n          <label className=\"toolbar-btn\">\n            🖼️ 背景图片\n            <input \n              type=\"file\" \n              accept=\"image/*\" \n              onChange={handleBackgroundUpload}\n              style={{ display: 'none' }}\n            />\n          </label>\n          \n          <button className=\"toolbar-btn\" onClick={addNewEvent}>\n            ➕ 添加事件\n          </button>\n          \n          {showImageUpload && (\n            <div className=\"image-upload-panel\">\n              <span>选择图片：</span>\n              <input \n                type=\"file\" \n                accept=\"image/*\" \n                onChange={handleImageUpload}\n              />\n            </div>\n          )}\n        </div>\n        \n        <div className=\"events-section\">\n          <h3>📅 今日事件 ({events.length})</h3>\n          {events.length > 0 ? (\n            <div className=\"events-list\">\n              {events.map(event => (\n                <div \n                  key={event.id} \n                  className=\"event-card\"\n                  style={{ borderLeftColor: getEventTypeColor(event.type) }}\n                >\n                  <div>\n                    <h4>{event.title}</h4>\n                    <p>\n                      {moment(event.start).format('HH:mm')} - {moment(event.end).format('HH:mm')}\n                    </p>\n                  </div>\n                  <div className=\"event-actions\">\n                    <span \n                      className=\"event-type\"\n                      style={{ backgroundColor: getEventTypeColor(event.type) }}\n                    >\n                      {formatEventType(event.type)}\n                    </span>\n                    <button \n                      className=\"delete-event-btn\"\n                      onClick={() => deleteEvent(event.id)}\n                    >\n                      删除\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"no-events\">暂无事件，点击\"添加事件\"按钮创建新事件</p>\n          )}\n        </div>\n        \n        <div \n          ref={editorRef}\n          className=\"content-editor\"\n          contentEditable\n          suppressContentEditableWarning\n          onInput={handleContentChange}\n          onFocus={handleEditorFocus}\n          onBlur={handleEditorBlur}\n          onKeyDown={handleKeyDown}\n          onCompositionStart={handleCompositionStart}\n          onCompositionEnd={handleCompositionEnd}\n          style={{ \n            backgroundImage: backgroundImage ? `url(${backgroundImage})` : 'none',\n            backgroundSize: 'cover',\n            backgroundPosition: 'center',\n            backgroundColor: backgroundImage ? 'rgba(255, 255, 255, 0.9)' : 'transparent'\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default EventDetailPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}