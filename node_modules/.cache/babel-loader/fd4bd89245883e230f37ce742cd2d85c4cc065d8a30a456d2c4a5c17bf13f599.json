{"ast":null,"code":"var _jsxFileName = \"/Users/zxydediannao/new_fashion-calendar/fashion-calendar/src/components/EventDetailPage.jsx\",\n  _s = $RefreshSig$();\n// src/components/EventDetailPage.jsx \nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport moment from 'moment';\nimport './EventDetailPage.css';\nimport { storageService } from '../utils/storage';\nimport ImageSearchModal from './ImageSearchModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EventDetailPage = () => {\n  _s();\n  const {\n    date\n  } = useParams();\n  const navigate = useNavigate();\n  const [content, setContent] = useState('');\n  const [backgroundImage, setBackgroundImage] = useState('');\n  const [events, setEvents] = useState([]);\n  const [showImageUpload, setShowImageUpload] = useState(false);\n  const [showImageSearch, setShowImageSearch] = useState(false);\n  const editorRef = useRef(null);\n  const isComposingRef = useRef(false);\n  const isInitializedRef = useRef(false);\n\n  // 加载该日期的事件数据\n  useEffect(() => {\n    console.log('🔍 加载数据，日期:', date);\n    const savedContent = storageService.getDailyContent(date);\n    const savedBackground = storageService.getDailyBackground(date);\n    const dateEvents = storageService.getEventsByDate(date);\n    console.log('📝 加载到的内容:', savedContent ? `有内容，长度: ${savedContent.length}` : '无内容');\n    console.log('🖼️ 背景图片:', savedBackground ? '有' : '无');\n    console.log('📅 事件数量:', dateEvents.length);\n    setContent(savedContent || '');\n    setBackgroundImage(savedBackground || '');\n    setEvents(dateEvents);\n    isInitializedRef.current = true;\n  }, [date]);\n\n  // 初始化编辑器内容\n  useEffect(() => {\n    if (!editorRef.current) return;\n    console.log('🎯 初始化编辑器，当前内容状态:', content ? `有内容，长度: ${content.length}` : '空');\n    const selection = window.getSelection();\n    const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n    const currentFocus = document.activeElement;\n    editorRef.current.innerHTML = content || '';\n    console.log('✅ 编辑器内容已设置:', editorRef.current.innerHTML.substring(0, 100));\n    if (range && currentFocus === editorRef.current) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n    updateEmptyState();\n  }, [content, date]);\n  const updateEmptyState = () => {\n    if (editorRef.current) {\n      const html = editorRef.current.innerHTML;\n      const isEmpty = !html || html === '<br>' || html === '<div><br></div>' || html === '&#8203;' || html === '<div>&#8203;</div>';\n      if (isEmpty) {\n        editorRef.current.classList.add('empty');\n        console.log('📭 编辑器状态: 空');\n      } else {\n        editorRef.current.classList.remove('empty');\n        console.log('📬 编辑器状态: 有内容');\n      }\n    }\n  };\n\n  // 从 DOM 更新内容状态\n  const updateContentFromDOM = () => {\n    if (editorRef.current) {\n      const newContent = editorRef.current.innerHTML;\n      const cleanContent = newContent.replace(/&#8203;|<\\/?div[^>]*>|<\\/?br[^>]*>/g, '').trim();\n      console.log('💾 准备保存内容，长度:', newContent.length, '清理后:', cleanContent.length);\n      if (cleanContent) {\n        setContent(newContent);\n        updateEmptyState();\n        const saveResult = storageService.saveDailyContent(date, newContent);\n        console.log('💽 保存结果:', saveResult ? '成功' : '失败', '键名:', `daily-content-${date}`);\n      } else {\n        setContent('');\n        updateEmptyState();\n        storageService.saveDailyContent(date, '');\n        console.log('💽 保存空内容');\n      }\n    }\n  };\n\n  // 内容变化处理\n  const handleContentChange = () => {\n    if (isComposingRef.current) return;\n    console.log('⌨️ 内容变化触发');\n    updateContentFromDOM();\n  };\n  const handleCompositionStart = () => {\n    isComposingRef.current = true;\n    console.log('🇨🇳 中文输入开始');\n  };\n  const handleCompositionEnd = () => {\n    isComposingRef.current = false;\n    console.log('🇨🇳 中文输入结束');\n    updateContentFromDOM();\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      document.execCommand('insertLineBreak');\n      setTimeout(updateContentFromDOM, 10);\n    }\n  };\n  const saveContent = () => {\n    updateContentFromDOM();\n    alert('内容已保存！');\n  };\n  const handleEditorFocus = () => {\n    if (editorRef.current) {\n      editorRef.current.classList.remove('empty');\n      console.log('🎯 编辑器获得焦点');\n      if (editorRef.current.innerHTML === '&#8203;' || editorRef.current.innerHTML === '<div>&#8203;</div>') {\n        editorRef.current.innerHTML = '';\n        const range = document.createRange();\n        const selection = window.getSelection();\n        range.selectNodeContents(editorRef.current);\n        range.collapse(false);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    }\n  };\n  const handleEditorBlur = () => {\n    console.log('👋 编辑器失去焦点');\n    updateEmptyState();\n    updateContentFromDOM();\n  };\n  const handleImageUpload = e => {\n    const file = e.target.files[0];\n    if (file) {\n      if (!file.type.startsWith('image/')) {\n        alert('请选择图片文件');\n        return;\n      }\n      if (file.size > 5 * 1024 * 1024) {\n        alert('图片大小不能超过 5MB');\n        return;\n      }\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const imageUrl = reader.result;\n        console.log('🖼️ 图片上传完成，大小:', imageUrl.length);\n        if (editorRef.current) {\n          const selection = window.getSelection();\n          const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n          const img = document.createElement('img');\n          img.src = imageUrl;\n          img.alt = \"uploaded\";\n          img.className = \"uploaded-image\";\n          if (range) {\n            range.insertNode(img);\n            const space = document.createTextNode(' ');\n            range.insertNode(space);\n            range.collapse(false);\n          } else {\n            editorRef.current.appendChild(img);\n            editorRef.current.appendChild(document.createTextNode(' '));\n          }\n          console.log('✅ 图片插入完成');\n          updateContentFromDOM();\n        }\n      };\n      reader.onerror = () => {\n        alert('图片读取失败，请重试');\n      };\n      reader.readAsDataURL(file);\n    }\n    e.target.value = '';\n  };\n  const handleBackgroundUpload = e => {\n    const file = e.target.files[0];\n    if (file) {\n      if (!file.type.startsWith('image/')) {\n        alert('请选择图片文件');\n        return;\n      }\n      if (file.size > 5 * 1024 * 1024) {\n        alert('图片大小不能超过 5MB');\n        return;\n      }\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const imageUrl = reader.result;\n        setBackgroundImage(imageUrl);\n        storageService.saveDailyBackground(date, imageUrl);\n        console.log('🎨 背景图片已保存');\n      };\n      reader.onerror = () => {\n        alert('背景图片读取失败，请重试');\n      };\n      reader.readAsDataURL(file);\n    }\n    e.target.value = '';\n  };\n\n  // 图片搜索相关功能\n  const handleImageSelect = imageUrl => {\n    if (editorRef.current) {\n      const selection = window.getSelection();\n      const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n      const img = document.createElement('img');\n      img.src = imageUrl;\n      img.alt = \"unsplash image\";\n      img.className = \"uploaded-image\";\n      if (range) {\n        range.insertNode(img);\n        const space = document.createTextNode(' ');\n        range.insertNode(space);\n        range.collapse(false);\n      } else {\n        editorRef.current.appendChild(img);\n        editorRef.current.appendChild(document.createTextNode(' '));\n      }\n      updateContentFromDOM();\n    }\n  };\n  const handleImageSave = imageData => {\n    storageService.saveDailyImage(date, imageData);\n    alert('图片已保存到收藏！');\n  };\n  const handleSetAsBackground = imageUrl => {\n    setBackgroundImage(imageUrl);\n    storageService.saveDailyBackground(date, imageUrl);\n    alert('已设置为背景图片！');\n  };\n  const addNewEvent = () => {\n    const title = prompt('请输入事件标题:');\n    if (!title || title.trim() === '') {\n      alert('事件标题不能为空');\n      return;\n    }\n    const type = prompt('请输入事件类型 (work/meeting/personal/urgent):', 'work');\n    const validTypes = ['work', 'meeting', 'personal', 'urgent'];\n    if (!validTypes.includes(type)) {\n      alert('事件类型必须是: work, meeting, personal 或 urgent');\n      return;\n    }\n    const startTime = prompt('请输入开始时间 (HH:mm)', '09:00');\n    const endTime = prompt('请输入结束时间 (HH:mm)', '10:00');\n    const timeRegex = /^([01]?[0-9]|2[0-3]):[0-5][0-9]$/;\n    if (!startTime || !endTime || !timeRegex.test(startTime) || !timeRegex.test(endTime)) {\n      alert('时间格式不正确，请使用 HH:mm 格式 (00:00 - 23:59)');\n      return;\n    }\n    const start = new Date(date + 'T' + startTime + ':00');\n    const end = new Date(date + 'T' + endTime + ':00');\n    if (end <= start) {\n      alert('结束时间必须晚于开始时间');\n      return;\n    }\n    const hasConflict = events.some(event => {\n      const eventStart = new Date(event.start);\n      const eventEnd = new Date(event.end);\n      return start < eventEnd && end > eventStart;\n    });\n    if (hasConflict) {\n      if (!confirm('该时间段与已有事件冲突，是否继续添加？')) {\n        return;\n      }\n    }\n    const newEvent = {\n      title: title.trim(),\n      start: start,\n      end: end,\n      type: type\n    };\n    const savedEvent = storageService.addEvent(newEvent);\n    setEvents(prev => [...prev, savedEvent]);\n    alert('事件添加成功！');\n  };\n  const deleteEvent = eventId => {\n    if (window.confirm('确定要删除这个事件吗？')) {\n      const updatedEvents = storageService.deleteEvent(eventId);\n      setEvents(updatedEvents.filter(event => moment(event.start).isSame(date, 'day')));\n      alert('事件已删除');\n    }\n  };\n  const formatEventType = type => {\n    const typeMap = {\n      'work': '💼 工作',\n      'meeting': '👥 会议',\n      'personal': '👤 个人',\n      'urgent': '🚨 紧急'\n    };\n    return typeMap[type] || type;\n  };\n  const getEventTypeColor = type => {\n    const colorMap = {\n      'work': '#3498db',\n      'meeting': '#9b59b6',\n      'personal': '#2ecc71',\n      'urgent': '#e74c3c'\n    };\n    return colorMap[type] || '#3498db';\n  };\n\n  // 调试函数\n  const checkStorage = () => {\n    var _editorRef$current;\n    console.log('🔍 存储状态检查:');\n    console.log('当前日期:', date);\n    console.log('存储键:', `daily-content-${date}`);\n    console.log('存储内容:', localStorage.getItem(`daily-content-${date}`));\n    console.log('React状态内容:', content ? `有内容，长度: ${content.length}` : '空');\n    console.log('编辑器内容:', (_editorRef$current = editorRef.current) === null || _editorRef$current === void 0 ? void 0 : _editorRef$current.innerHTML.substring(0, 200));\n  };\n\n  // 在组件挂载时检查存储\n  useEffect(() => {\n    console.log('🚀 EventDetailPage 组件挂载');\n    checkStorage();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"event-detail-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"detail-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-btn\",\n        onClick: () => navigate('/'),\n        children: \"\\u2190 \\u8FD4\\u56DE\\u65E5\\u5386\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"detail-title\",\n        children: moment(date).format('YYYY年MM月DD日 dddd')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '10px',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"toolbar-btn\",\n          onClick: checkStorage,\n          style: {\n            background: '#6c757d',\n            fontSize: '12px',\n            padding: '5px 10px'\n          },\n          children: \"\\uD83D\\uDD0D \\u8C03\\u8BD5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"save-btn\",\n          onClick: saveContent,\n          children: \"\\uD83D\\uDCBE \\u4FDD\\u5B58\\u5185\\u5BB9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"detail-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"editor-toolbar\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"toolbar-btn\",\n          onClick: () => setShowImageUpload(!showImageUpload),\n          children: \"\\uD83D\\uDCF7 \\u6DFB\\u52A0\\u56FE\\u7247\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"toolbar-btn\",\n          onClick: () => setShowImageSearch(true),\n          style: {\n            background: '#9b59b6'\n          },\n          children: \"\\uD83D\\uDDBC\\uFE0F \\u641C\\u7D22\\u56FE\\u7247\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"toolbar-btn\",\n          children: [\"\\uD83C\\uDFA8 \\u80CC\\u666F\\u56FE\\u7247\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: handleBackgroundUpload,\n            style: {\n              display: 'none'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"toolbar-btn\",\n          onClick: addNewEvent,\n          children: \"\\u2795 \\u6DFB\\u52A0\\u4E8B\\u4EF6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 11\n        }, this), showImageUpload && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-upload-panel\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u9009\\u62E9\\u56FE\\u7247\\uFF1A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: handleImageUpload\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"events-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"\\uD83D\\uDCC5 \\u4ECA\\u65E5\\u4E8B\\u4EF6 (\", events.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 11\n        }, this), events.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"events-list\",\n          children: events.map(event => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"event-card\",\n            style: {\n              borderLeftColor: getEventTypeColor(event.type)\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: event.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [moment(event.start).format('HH:mm'), \" - \", moment(event.end).format('HH:mm')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"event-type\",\n                style: {\n                  backgroundColor: getEventTypeColor(event.type)\n                },\n                children: formatEventType(event.type)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"delete-event-btn\",\n                onClick: () => deleteEvent(event.id),\n                children: \"\\u5220\\u9664\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 465,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 19\n            }, this)]\n          }, event.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"no-events\",\n          children: \"\\u6682\\u65E0\\u4E8B\\u4EF6\\uFF0C\\u70B9\\u51FB\\\"\\u6DFB\\u52A0\\u4E8B\\u4EF6\\\"\\u6309\\u94AE\\u521B\\u5EFA\\u65B0\\u4E8B\\u4EF6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: editorRef,\n        className: \"content-editor\",\n        contentEditable: true,\n        suppressContentEditableWarning: true,\n        onInput: handleContentChange,\n        onFocus: handleEditorFocus,\n        onBlur: handleEditorBlur,\n        onKeyDown: handleKeyDown,\n        onCompositionStart: handleCompositionStart,\n        onCompositionEnd: handleCompositionEnd,\n        style: {\n          backgroundImage: backgroundImage ? `url(${backgroundImage})` : 'none',\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          backgroundColor: backgroundImage ? 'rgba(255, 255, 255, 0.9)' : 'transparent'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 7\n    }, this), showImageSearch && /*#__PURE__*/_jsxDEV(ImageSearchModal, {\n      date: date,\n      onClose: () => setShowImageSearch(false),\n      onImageSelect: handleImageSelect,\n      onImageSave: handleImageSave,\n      onSetAsBackground: handleSetAsBackground\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 379,\n    columnNumber: 5\n  }, this);\n};\n_s(EventDetailPage, \"Ldpo51a7WgtnK2eUrSo5caqNFCM=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = EventDetailPage;\nexport default EventDetailPage;\nvar _c;\n$RefreshReg$(_c, \"EventDetailPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","moment","storageService","ImageSearchModal","jsxDEV","_jsxDEV","EventDetailPage","_s","date","navigate","content","setContent","backgroundImage","setBackgroundImage","events","setEvents","showImageUpload","setShowImageUpload","showImageSearch","setShowImageSearch","editorRef","isComposingRef","isInitializedRef","console","log","savedContent","getDailyContent","savedBackground","getDailyBackground","dateEvents","getEventsByDate","length","current","selection","window","getSelection","range","rangeCount","getRangeAt","currentFocus","document","activeElement","innerHTML","substring","removeAllRanges","addRange","updateEmptyState","html","isEmpty","classList","add","remove","updateContentFromDOM","newContent","cleanContent","replace","trim","saveResult","saveDailyContent","handleContentChange","handleCompositionStart","handleCompositionEnd","handleKeyDown","e","key","preventDefault","execCommand","setTimeout","saveContent","alert","handleEditorFocus","createRange","selectNodeContents","collapse","handleEditorBlur","handleImageUpload","file","target","files","type","startsWith","size","reader","FileReader","onloadend","imageUrl","result","img","createElement","src","alt","className","insertNode","space","createTextNode","appendChild","onerror","readAsDataURL","value","handleBackgroundUpload","saveDailyBackground","handleImageSelect","handleImageSave","imageData","saveDailyImage","handleSetAsBackground","addNewEvent","title","prompt","validTypes","includes","startTime","endTime","timeRegex","test","start","Date","end","hasConflict","some","event","eventStart","eventEnd","confirm","newEvent","savedEvent","addEvent","prev","deleteEvent","eventId","updatedEvents","filter","isSame","formatEventType","typeMap","getEventTypeColor","colorMap","checkStorage","_editorRef$current","localStorage","getItem","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","format","style","display","gap","alignItems","background","fontSize","padding","accept","onChange","map","borderLeftColor","backgroundColor","id","ref","contentEditable","suppressContentEditableWarning","onInput","onFocus","onBlur","onKeyDown","onCompositionStart","onCompositionEnd","backgroundSize","backgroundPosition","onClose","onImageSelect","onImageSave","onSetAsBackground","_c","$RefreshReg$"],"sources":["/Users/zxydediannao/new_fashion-calendar/fashion-calendar/src/components/EventDetailPage.jsx"],"sourcesContent":["// src/components/EventDetailPage.jsx \nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport moment from 'moment';\nimport './EventDetailPage.css';\nimport { storageService } from '../utils/storage';\nimport ImageSearchModal from './ImageSearchModal';\n\nconst EventDetailPage = () => {\n  const { date } = useParams();\n  const navigate = useNavigate();\n  const [content, setContent] = useState('');\n  const [backgroundImage, setBackgroundImage] = useState('');\n  const [events, setEvents] = useState([]);\n  const [showImageUpload, setShowImageUpload] = useState(false);\n  const [showImageSearch, setShowImageSearch] = useState(false);\n  const editorRef = useRef(null);\n  const isComposingRef = useRef(false);\n  const isInitializedRef = useRef(false);\n\n  // 加载该日期的事件数据\n  useEffect(() => {\n    console.log('🔍 加载数据，日期:', date);\n    \n    const savedContent = storageService.getDailyContent(date);\n    const savedBackground = storageService.getDailyBackground(date);\n    const dateEvents = storageService.getEventsByDate(date);\n\n    console.log('📝 加载到的内容:', savedContent ? `有内容，长度: ${savedContent.length}` : '无内容');\n    console.log('🖼️ 背景图片:', savedBackground ? '有' : '无');\n    console.log('📅 事件数量:', dateEvents.length);\n    \n    setContent(savedContent || '');\n    setBackgroundImage(savedBackground || '');\n    setEvents(dateEvents);\n    \n    isInitializedRef.current = true;\n  }, [date]);\n\n  // 初始化编辑器内容\n  useEffect(() => {\n    if (!editorRef.current) return;\n    \n    console.log('🎯 初始化编辑器，当前内容状态:', content ? `有内容，长度: ${content.length}` : '空');\n    \n    const selection = window.getSelection();\n    const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n    const currentFocus = document.activeElement;\n    \n    editorRef.current.innerHTML = content || '';\n    \n    console.log('✅ 编辑器内容已设置:', editorRef.current.innerHTML.substring(0, 100));\n    \n    if (range && currentFocus === editorRef.current) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n    \n    updateEmptyState();\n    \n  }, [content, date]);\n\n  const updateEmptyState = () => {\n    if (editorRef.current) {\n      const html = editorRef.current.innerHTML;\n      const isEmpty = !html || \n                     html === '<br>' || \n                     html === '<div><br></div>' || \n                     html === '&#8203;' ||\n                     html === '<div>&#8203;</div>';\n      \n      if (isEmpty) {\n        editorRef.current.classList.add('empty');\n        console.log('📭 编辑器状态: 空');\n      } else {\n        editorRef.current.classList.remove('empty');\n        console.log('📬 编辑器状态: 有内容');\n      }\n    }\n  };\n\n  // 从 DOM 更新内容状态\n  const updateContentFromDOM = () => {\n    if (editorRef.current) {\n      const newContent = editorRef.current.innerHTML;\n      \n      const cleanContent = newContent.replace(/&#8203;|<\\/?div[^>]*>|<\\/?br[^>]*>/g, '').trim();\n      \n      console.log('💾 准备保存内容，长度:', newContent.length, '清理后:', cleanContent.length);\n      \n      if (cleanContent) {\n        setContent(newContent);\n        updateEmptyState();\n        const saveResult = storageService.saveDailyContent(date, newContent);\n        console.log('💽 保存结果:', saveResult ? '成功' : '失败', '键名:', `daily-content-${date}`);\n      } else {\n        setContent('');\n        updateEmptyState();\n        storageService.saveDailyContent(date, '');\n        console.log('💽 保存空内容');\n      }\n    }\n  };\n\n  // 内容变化处理\n  const handleContentChange = () => {\n    if (isComposingRef.current) return;\n    \n    console.log('⌨️ 内容变化触发');\n    updateContentFromDOM();\n  };\n\n  const handleCompositionStart = () => {\n    isComposingRef.current = true;\n    console.log('🇨🇳 中文输入开始');\n  };\n\n  const handleCompositionEnd = () => {\n    isComposingRef.current = false;\n    console.log('🇨🇳 中文输入结束');\n    updateContentFromDOM();\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      document.execCommand('insertLineBreak');\n      setTimeout(updateContentFromDOM, 10);\n    }\n  };\n\n  const saveContent = () => {\n    updateContentFromDOM();\n    alert('内容已保存！');\n  };\n\n  const handleEditorFocus = () => {\n    if (editorRef.current) {\n      editorRef.current.classList.remove('empty');\n      console.log('🎯 编辑器获得焦点');\n      \n      if (editorRef.current.innerHTML === '&#8203;' || editorRef.current.innerHTML === '<div>&#8203;</div>') {\n        editorRef.current.innerHTML = '';\n        const range = document.createRange();\n        const selection = window.getSelection();\n        range.selectNodeContents(editorRef.current);\n        range.collapse(false);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    }\n  };\n\n  const handleEditorBlur = () => {\n    console.log('👋 编辑器失去焦点');\n    updateEmptyState();\n    updateContentFromDOM();\n  };\n\n  const handleImageUpload = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      if (!file.type.startsWith('image/')) {\n        alert('请选择图片文件');\n        return;\n      }\n\n      if (file.size > 5 * 1024 * 1024) {\n        alert('图片大小不能超过 5MB');\n        return;\n      }\n\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const imageUrl = reader.result;\n        console.log('🖼️ 图片上传完成，大小:', imageUrl.length);\n        \n        if (editorRef.current) {\n          const selection = window.getSelection();\n          const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n          \n          const img = document.createElement('img');\n          img.src = imageUrl;\n          img.alt = \"uploaded\";\n          img.className = \"uploaded-image\";\n          \n          if (range) {\n            range.insertNode(img);\n            const space = document.createTextNode(' ');\n            range.insertNode(space);\n            range.collapse(false);\n          } else {\n            editorRef.current.appendChild(img);\n            editorRef.current.appendChild(document.createTextNode(' '));\n          }\n          \n          console.log('✅ 图片插入完成');\n          updateContentFromDOM();\n        }\n      };\n      \n      reader.onerror = () => {\n        alert('图片读取失败，请重试');\n      };\n      \n      reader.readAsDataURL(file);\n    }\n    e.target.value = '';\n  };\n\n  const handleBackgroundUpload = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      if (!file.type.startsWith('image/')) {\n        alert('请选择图片文件');\n        return;\n      }\n\n      if (file.size > 5 * 1024 * 1024) {\n        alert('图片大小不能超过 5MB');\n        return;\n      }\n\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const imageUrl = reader.result;\n        setBackgroundImage(imageUrl);\n        storageService.saveDailyBackground(date, imageUrl);\n        console.log('🎨 背景图片已保存');\n      };\n      \n      reader.onerror = () => {\n        alert('背景图片读取失败，请重试');\n      };\n      \n      reader.readAsDataURL(file);\n    }\n    e.target.value = '';\n  };\n\n  // 图片搜索相关功能\n  const handleImageSelect = (imageUrl) => {\n    if (editorRef.current) {\n      const selection = window.getSelection();\n      const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n      \n      const img = document.createElement('img');\n      img.src = imageUrl;\n      img.alt = \"unsplash image\";\n      img.className = \"uploaded-image\";\n      \n      if (range) {\n        range.insertNode(img);\n        const space = document.createTextNode(' ');\n        range.insertNode(space);\n        range.collapse(false);\n      } else {\n        editorRef.current.appendChild(img);\n        editorRef.current.appendChild(document.createTextNode(' '));\n      }\n      \n      updateContentFromDOM();\n    }\n  };\n\n  const handleImageSave = (imageData) => {\n    storageService.saveDailyImage(date, imageData);\n    alert('图片已保存到收藏！');\n  };\n\n  const handleSetAsBackground = (imageUrl) => {\n    setBackgroundImage(imageUrl);\n    storageService.saveDailyBackground(date, imageUrl);\n    alert('已设置为背景图片！');\n  };\n\n  const addNewEvent = () => {\n    const title = prompt('请输入事件标题:');\n    if (!title || title.trim() === '') {\n      alert('事件标题不能为空');\n      return;\n    }\n\n    const type = prompt('请输入事件类型 (work/meeting/personal/urgent):', 'work');\n    const validTypes = ['work', 'meeting', 'personal', 'urgent'];\n    if (!validTypes.includes(type)) {\n      alert('事件类型必须是: work, meeting, personal 或 urgent');\n      return;\n    }\n\n    const startTime = prompt('请输入开始时间 (HH:mm)', '09:00');\n    const endTime = prompt('请输入结束时间 (HH:mm)', '10:00');\n\n    const timeRegex = /^([01]?[0-9]|2[0-3]):[0-5][0-9]$/;\n    if (!startTime || !endTime || !timeRegex.test(startTime) || !timeRegex.test(endTime)) {\n      alert('时间格式不正确，请使用 HH:mm 格式 (00:00 - 23:59)');\n      return;\n    }\n\n    const start = new Date(date + 'T' + startTime + ':00');\n    const end = new Date(date + 'T' + endTime + ':00');\n    \n    if (end <= start) {\n      alert('结束时间必须晚于开始时间');\n      return;\n    }\n\n    const hasConflict = events.some(event => {\n      const eventStart = new Date(event.start);\n      const eventEnd = new Date(event.end);\n      return (start < eventEnd && end > eventStart);\n    });\n\n    if (hasConflict) {\n      if (!confirm('该时间段与已有事件冲突，是否继续添加？')) {\n        return;\n      }\n    }\n\n    const newEvent = {\n      title: title.trim(),\n      start: start,\n      end: end,\n      type: type\n    };\n\n    const savedEvent = storageService.addEvent(newEvent);\n    setEvents(prev => [...prev, savedEvent]);\n    alert('事件添加成功！');\n  };\n\n  const deleteEvent = (eventId) => {\n    if (window.confirm('确定要删除这个事件吗？')) {\n      const updatedEvents = storageService.deleteEvent(eventId);\n      setEvents(updatedEvents.filter(event => \n        moment(event.start).isSame(date, 'day')\n      ));\n      alert('事件已删除');\n    }\n  };\n\n  const formatEventType = (type) => {\n    const typeMap = {\n      'work': '💼 工作',\n      'meeting': '👥 会议',\n      'personal': '👤 个人',\n      'urgent': '🚨 紧急'\n    };\n    return typeMap[type] || type;\n  };\n\n  const getEventTypeColor = (type) => {\n    const colorMap = {\n      'work': '#3498db',\n      'meeting': '#9b59b6',\n      'personal': '#2ecc71',\n      'urgent': '#e74c3c'\n    };\n    return colorMap[type] || '#3498db';\n  };\n\n  // 调试函数\n  const checkStorage = () => {\n    console.log('🔍 存储状态检查:');\n    console.log('当前日期:', date);\n    console.log('存储键:', `daily-content-${date}`);\n    console.log('存储内容:', localStorage.getItem(`daily-content-${date}`));\n    console.log('React状态内容:', content ? `有内容，长度: ${content.length}` : '空');\n    console.log('编辑器内容:', editorRef.current?.innerHTML.substring(0, 200));\n  };\n\n  // 在组件挂载时检查存储\n  useEffect(() => {\n    console.log('🚀 EventDetailPage 组件挂载');\n    checkStorage();\n  }, []);\n\n  return (\n    <div className=\"event-detail-page\">\n      <div className=\"detail-header\">\n        <button className=\"back-btn\" onClick={() => navigate('/')}>\n          ← 返回日历\n        </button>\n        <h1 className=\"detail-title\">{moment(date).format('YYYY年MM月DD日 dddd')}</h1>\n        <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>\n          <button \n            className=\"toolbar-btn\" \n            onClick={checkStorage}\n            style={{ background: '#6c757d', fontSize: '12px', padding: '5px 10px' }}\n          >\n            🔍 调试\n          </button>\n          <button className=\"save-btn\" onClick={saveContent}>\n            💾 保存内容\n          </button>\n        </div>\n      </div>\n      \n      <div className=\"detail-content\">\n        <div className=\"editor-toolbar\">\n          <button \n            className=\"toolbar-btn\" \n            onClick={() => setShowImageUpload(!showImageUpload)}\n          >\n            📷 添加图片\n          </button>\n          \n          <button \n            className=\"toolbar-btn\"\n            onClick={() => setShowImageSearch(true)}\n            style={{ background: '#9b59b6' }}\n          >\n            🖼️ 搜索图片\n          </button>\n          \n          <label className=\"toolbar-btn\">\n            🎨 背景图片\n            <input \n              type=\"file\" \n              accept=\"image/*\" \n              onChange={handleBackgroundUpload}\n              style={{ display: 'none' }}\n            />\n          </label>\n          \n          <button className=\"toolbar-btn\" onClick={addNewEvent}>\n            ➕ 添加事件\n          </button>\n          \n          {showImageUpload && (\n            <div className=\"image-upload-panel\">\n              <span>选择图片：</span>\n              <input \n                type=\"file\" \n                accept=\"image/*\" \n                onChange={handleImageUpload}\n              />\n            </div>\n          )}\n        </div>\n        \n        <div className=\"events-section\">\n          <h3>📅 今日事件 ({events.length})</h3>\n          {events.length > 0 ? (\n            <div className=\"events-list\">\n              {events.map(event => (\n                <div \n                  key={event.id} \n                  className=\"event-card\"\n                  style={{ borderLeftColor: getEventTypeColor(event.type) }}\n                >\n                  <div>\n                    <h4>{event.title}</h4>\n                    <p>\n                      {moment(event.start).format('HH:mm')} - {moment(event.end).format('HH:mm')}\n                    </p>\n                  </div>\n                  <div className=\"event-actions\">\n                    <span \n                      className=\"event-type\"\n                      style={{ backgroundColor: getEventTypeColor(event.type) }}\n                    >\n                      {formatEventType(event.type)}\n                    </span>\n                    <button \n                      className=\"delete-event-btn\"\n                      onClick={() => deleteEvent(event.id)}\n                    >\n                      删除\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"no-events\">暂无事件，点击\"添加事件\"按钮创建新事件</p>\n          )}\n        </div>\n        \n        <div \n          ref={editorRef}\n          className=\"content-editor\"\n          contentEditable\n          suppressContentEditableWarning\n          onInput={handleContentChange}\n          onFocus={handleEditorFocus}\n          onBlur={handleEditorBlur}\n          onKeyDown={handleKeyDown}\n          onCompositionStart={handleCompositionStart}\n          onCompositionEnd={handleCompositionEnd}\n          style={{ \n            backgroundImage: backgroundImage ? `url(${backgroundImage})` : 'none',\n            backgroundSize: 'cover',\n            backgroundPosition: 'center',\n            backgroundColor: backgroundImage ? 'rgba(255, 255, 255, 0.9)' : 'transparent'\n          }}\n        />\n      </div>\n\n      {/* 图片搜索模态框 */}\n      {showImageSearch && (\n        <ImageSearchModal\n          date={date}\n          onClose={() => setShowImageSearch(false)}\n          onImageSelect={handleImageSelect}\n          onImageSave={handleImageSave}\n          onSetAsBackground={handleSetAsBackground}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default EventDetailPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}